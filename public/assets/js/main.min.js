function clone(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function dynamicSort(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,r){var o=n[e]<r[e]?-1:n[e]>r[e]?1:0;return o*t}}var app=angular.module("MainApp",["ui.router","ngAnimate"]);app.run(["$rootScope","$document","$locale","$state",function(e,t,n,r){e.$on("$stateChangeSuccess",function(){document.body.scrollTop=document.documentElement.scrollTop=0}),e.$state=r,e.$on("$stateChangeStart",function(e,t,n){t.redirectTo&&(e.preventDefault(),r.go(t.redirectTo,n,{location:"replace"}))})}]),app.filter("startFrom",function(){return function(e,t){return e?(t=+t,e.slice(t)):[]}}),angular.module("MainApp").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/views/home.html",controller:"HomeCtrl"}).state("exclusive",{url:"/exclusive",templateUrl:"app/views/exclusive.html"}).state("ratings",{url:"/ratings",templateUrl:"app/views/ratings.html",redirectTo:"ratings.videos"}).state("ratings.videos",{url:"-videos",templateUrl:"app/views/ratings-videos.html"}).state("ratings.channels",{url:"-channels",templateUrl:"app/views/ratings-channels.html"}).state("blog",{url:"/blog",templateUrl:"app/views/blog.html"}).state("article",{url:"/blog/:url",templateUrl:"app/views/article.html",scope:{content:"="},controller:["$scope","$stateParams",function(e,t){for(var n=0;n<e.videos.length;n++)e.videos[n].url===t.url&&(e.content=e.videos[n])}]}).state("history",{url:"/history",templateUrl:"app/views/history.html",redirectTo:"history.viewed"}).state("history.viewed",{url:"-viewed",templateUrl:"app/views/history-viewed.html"}).state("history.liked",{url:"-liked",templateUrl:"app/views/history-liked.html"}).state("user",{url:"/user/:url",templateUrl:"app/views/channel.html",redirectTo:"user.all",scope:{content:"="},controller:["$scope","$stateParams","factory",function(e,t,n){if(t.url===e.currentUser.url)e.content=e.currentUser;else for(var r=0;r<e.channels.length;r++)e.channels[r].url===t.url&&(e.content=e.channels[r])}]}).state("user.all",{url:"/all",templateUrl:"app/views/channel-all.html"}).state("user.liked",{url:"/liked",templateUrl:"app/views/channel-liked.html"}).state("xuser",{url:"/xuser/:url",templateUrl:"app/views/xchannel.html",redirectTo:"xuser.all",controller:"xChannelCtrl"}).state("xuser.all",{url:"/all",templateUrl:"app/views/xchannel-all.html"}).state("xuser.playlist",{url:"/playlist",templateUrl:"app/views/xchannel-liked.html"}).state("xuser.shop",{url:"/shop",templateUrl:"app/views/xchannel-shop.html"}).state("shop-detailed",{url:"/shop/:itemId",templateUrl:"app/views/shop-detail.html",controller:"shopDetailCtrl"}).state("profile",{url:"/profile",templateUrl:"app/views/profile.html",controller:"ProfileCtrl"}).state("video",{url:"/video/:url",templateUrl:"app/views/videopage.html",scope:{content:"="},controller:["$scope","$stateParams","factory",function(e,t,n){for(var r=0;r<e.videos.length;r++)e.videos[r].url===t.url&&(e.content=e.videos[r])}]})}]),angular.module("MainApp").factory("factory",["$http",function(e){var t={};return t.getHomePageData=function(){return e.get("./assets/js/data.json")},t.getVideos=function(){return e.get("./assets/js/data.json")},t}]),angular.module("MainApp").factory("prettyDate",["$http",function(e){return function(e,t){var n=new Date((e||"").replace(/-/g,"/").replace(/[TZ]/g," ")),r=((new Date).getTime()-n.getTime())/1e3,o=Math.floor(r/86400),i=Math.floor(r/31536e3);if(!(isNaN(o)||0>o))return t&&1>o?"Сегодня":0==o&&(60>r&&"Только что"||120>r&&"1 минуту назад"||3600>r&&Math.floor(r/60)+" минут назад"||7200>r&&"1 час назад"||86400>r&&Math.floor(r/3600)+" часов назад")||1>o&&today&&"Сегодня"||1==o&&"Вчера"||7>o&&o+" дней назад"||31>o&&Math.ceil(o/7)+" недель назад"||1===i&&i+" год назад"||i>1&&i+" лет назад"}}]),angular.module("MainApp").controller("ChannelCtrl",["$scope","$sce","factory",function(e,t,n){e.hoverIn=function(t){"ava"==t?e.changeAvaText=!0:e.channelbgText=!0},e.hoverOut=function(t){"ava"==t?e.changeAvaText=!1:e.channelbgText=!1},e.subscriptions=116}]),angular.module("MainApp").controller("CommentsCtrl",["$scope","$sce","factory",function(e,t,n){e.commentsLength=function(){if(e.comments){for(var t=0,n=0;n<e.comments.length;n++){t+=1;for(var r=0;r<e.comments[n].responses.length;r++)t+=1}return t}},e.allowInput=function(t,n){for(var r=0;r<e.comments.length;r++){e.comments[r].inputAllowed=!1;for(var o=0;o<e.comments[r].responses.length;o++)e.comments[r].responses[o].inputAllowed=!1}void 0!==t&&void 0===n?e.comments[t].inputAllowed=!0:void 0!==t&&void 0!==n&&(e.comments[t].responses[n].inputAllowed=!0)},e.isInputAllowed=function(t,n){return void 0!==t&&void 0===n?e.comments[t].inputAllowed:void 0!==t&&void 0!==n?e.comments[t].responses[n].inputAllowed:void 0},e.addComment=function(t,n,r){if(t){var o=e.getDate((new Date).toLocaleString()),i={user:e.currentUser.name,text:t,link:"#",img:e.currentUser.avatar,date:o,likes:0,responses:[]};void 0!==r?(i.text=e.comments[n].responses[r].user+", "+i.text,e.comments[n].responses.splice(r+1,0,i)):void 0!==n?e.comments[n].responses.unshift(i):e.comments.unshift(i)}},window.showComments=function(){console.log(e.comments)}}]),angular.module("MainApp").controller("HeaderCtrl",["$scope","factory",function(e,t){e.removePin=function(t){var n=e.pins.indexOf(t);n>-1&&e.pins.splice(n,1)}}]),angular.module("MainApp").controller("HomeCtrl",["$scope","$sce","factory",function(e,t,n){n.getHomePageData().success(function(t){e.blogs=t.videos,e.videos=t.videos,e.channels=t.channels,e.goods=t.goods})}]),angular.module("MainApp").controller("MainCtrl",["$scope","$sce","factory","prettyDate",function(e,t,n,r){n.getVideos().success(function(t){e.blogs=t.videos,e.videos=t.videos,e.pins=t.pins,e.channels=t.channels,e.goods=t.goods,e.notifications=t.notifications,e.comments=t.comments,e.videosHistory=clone(e.videos.sort(dynamicSort("date"))).reverse()}),e.categories=["JOD","Adamantio 993"],e.currentUser={name:"Current User",url:"CurrUser",avatar:"https://yt3.ggpht.com/-fGQ0wMqcQ2E/AAAAAAAAAAI/AAAAAAAAAAA/DJ1UmcmYRMI/s100-c-k-no-rj-c0xffffff/photo.jpg",cover:"https://yt3.ggpht.com/-n5hYQ4Nf_Uk/VQsVarAAlgI/AAAAAAAAKhM/U3WIG__7xQs/w2120-fcrop64=1,00005a57ffffa5a8-nd-c0xffffffff-rj-k-no/Never-Stop-Learning-Social_YouTube%2B%25281%2529.png",description:"This is user channel description test test test test test test test test test test test test test test test test.",subscr_counter:18358461},e.getDate=function(e,t){return r(e,t)},e.historyFilter=function(e,t,n){return 0!==t&&e[t][n]===e[t-1][n]?!0:void 0},e.limits={videos:4,channels:6,blogs:6,comments:2},e.initialLimits=clone(e.limits),e.loadMore=function(t){e.limits[t]+=e.initialLimits[t]},e.remove=function(e,t){void 0!==t&&("all"===t?e.length=0:e.splice(e.indexOf(t),1))},window.showVideos=function(){console.log(e.videos)}}]),angular.module("MainApp").controller("ProfileCtrl",["$scope",function(e){e.videosCounter=110,e.profile={user:{avatar:"assets/img/prof_img.png",name:"Burav4ik24",fbLink:"http://fb.com/",userInfo:"25 лет, Есть свой личный пранк канал. Веду активный способ жизни. мой вебсайт:",userWebsite:"http://google.com",userCity:"Киев",userCountry:"Украина"},userChannels:1,userAva:"assets/img/u1.png",channel:{channelName:"RomanAtwood",channelSubscribers:18358461}}}]),angular.module("MainApp").controller("shopDetailCtrl",["$scope","$stateParams",function(e,t){e.test="asgasgasg",e.itemDetails={name:t.itemId,images:["assets/img/tshort1.png","assets/img/tshort2.png"]},e.mainImageUrl=e.itemDetails.images[0],e.setImage=function(t){e.mainImageUrl=t},e.selectedPreview=0,e.setPreview=function(t){e.selectedPreview=t}}]),angular.module("MainApp").controller("xChannelCtrl",["$scope","$stateParams",function(e,t){e.sortTypes=["По дате добавления [сначала новые]","По дате добавления [сначала старые]"],e.xUser={name:t.url,url:t.url,avatar:"https://yt3.ggpht.com/-fGQ0wMqcQ2E/AAAAAAAAAAI/AAAAAAAAAAA/DJ1UmcmYRMI/s100-c-k-no-rj-c0xffffff/photo.jpg",cover:"https://yt3.ggpht.com/-n5hYQ4Nf_Uk/VQsVarAAlgI/AAAAAAAAKhM/U3WIG__7xQs/w2120-fcrop64=1,00005a57ffffa5a8-nd-c0xffffffff-rj-k-no/Never-Stop-Learning-Social_YouTube%2B%25281%2529.png",description:"This is user channel description test test test test test test test test test test test test test test test test.",subscr_counter:18358461},e.sortReverse=void 0,e.sortBy=function(t){e.sortReverse=0==t}}]),angular.module("MainApp").directive("footerview",function(){return{restrict:"E",replace:!0,templateUrl:"app/views/footer.html"}}),angular.module("MainApp").directive("headerview",function(){return{restrict:"E",controller:"HeaderCtrl",replace:!0,templateUrl:"app/views/header.html"}}),app.directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter)}),t.preventDefault())})}}),app.directive("popoverTrigger",["$document",function(e){return{restrict:"A",link:function(t,n){t.userActive=!1,t.notificationActive=!1,e.on("click",function(){(t.userActive||t.notificationActive)&&t.$apply(function(){t.userActive=!1,t.notificationActive=!1})}),n.on("click",function(e){t.userActive&&t.notificationActive||e.stopPropagation()})}}}]),angular.module("MainApp").directive("overlay",["$interval",function(e){return{restrict:"E",controller:"MainCtrl",replace:!0,template:'<div class="overlay" ng-class="{active:popupActive}" ng-click="hidePopup()"><div class="modal" ng-include="content"></div></div>',link:function(e,t,n){e.showPopup=function(t){e.content="app/views/"+t+".html",e.popupActive=!0},e.hidePopup=function(){e.content="",e.popupActive=!1}}}}]),angular.module("MainApp").directive("sidebarview",function(){return{restrict:"E",replace:!0,templateUrl:"app/views/sidebar.html"}}),angular.module("MainApp").directive("slider",["prettyDate",function(e){return{restrict:"E",scope:{info:"="},replace:!0,templateUrl:function(e,t){if(t){if("videos"===t.type)return"app/views/slider-videos.html";if("channels"===t.type)return"app/views/slider-channels.html"}},link:function(t,n,r){t.slidesN=[0,1,2],t.activeSlide=0,t.slideTo=function(e){t.activeSlide=e,n[0].querySelector(".slider__inner").style.left="-"+100*e+"%"},t.isActiveSlide=function(e){return e===t.activeSlide?!0:void 0},t.getDate=function(t,n){return e(t,n)}}}}]),angular.module("MainApp").directive("slideable",function(){return{restrict:"C",compile:function(e,t){var n=e.html();return e.html('<div class="slideable_content" style="margin:0 0 15px 0 !important; padding:0 !important" >'+n+"</div>"),function(e,t,n){n.duration=n.duration?n.duration:".3s",n.easing=n.easing?n.easing:"ease-in-out",t.css({overflow:"hidden",height:"0px",transitionProperty:"height",transitionDuration:n.duration,transitionTimingFunction:n.easing})}}}}).directive("slideToggle",function(){return{restrict:"A",link:function(e,t,n){var r=document.querySelector(n.slideToggle),o=document.querySelectorAll(".slideable");t.bind("click",function(){var e=r.querySelector(".slideable_content");if(t.hasClass("active")){t.parent().find("a").removeClass("active");for(var n=0;n<o.length;n++)o[n].style.height="0"}else{t.parent().find("a").removeClass("active");for(var i=e.clientHeight,n=0;n<o.length;n++)o[n].style.height="0";r.style.height=i+15+"px",t.addClass("active")}})}}});