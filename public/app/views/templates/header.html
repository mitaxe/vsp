<header>

    <!-- header -->
    <div class="header" ng-class="{'sidebarHidden':sandwichClicked}">

        <!-- sandwich -->
        <div class="header__item header__sandwich" ng-click="sandwichClicked = !sandwichClicked">
            <div class="table-middle">
                <div class="sandwich" ng-class="{'active':sandwichClicked}">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>

        <!-- logo -->
        <a ui-sref="home">
            <div class="header__item header__logo" ng-class="{'searchActive':searchActive}">
                <div class="table-middle">
                    <div class="logo">
                        <h1 class="h1">new <span>[</span>age<span>]</span></h1>
                        <span class="h1 h1-absolute">new <span>[</span>age<span>]</span></span>
                    </div>
                </div>
            </div>
        </a>

        <!-- back button -->
        <a href="#">
            <div class="header__item header__back" ng-class="{'searchActive':searchActive}">
                <div class="table-middle">
                    <i class="svg"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="12" viewBox="0 0 28.914 16.998"><path fill-rule="evenodd" clip-rule="evenodd" fill="" d="M28.914 2.857L26.057 0l-11.66 11.66L2.83.093 0 2.924l13.98 13.98.35-.348.44.442"/></svg></i><span>Рекомендуемые</span>
                </div>
            </div>
        </a>

        <!-- login block -->
        <div class="header__item header__login">

            <!-- login button -->
            <div ng-show="!user.authorized" class="table-middle">
                <a ng-mousedown="showloginModal = true" id="loginBtn" class="btn btn-green main-ui btn-small-phone">{{ getLoginBtnText() }}</a>
            </div>

            <!-- user -->
            <div ng-show="user.authorized" class="header__item header__user"
                ng-class="{'active':userActive}"
                popover-trigger>
                <div class="table-middle" ng-click="notificationActive = false; userActive = !userActive;">
                    <div class="user">
                        <div class="user__avatar" ng-style="{'background-image': 'url(' + currentUser.avatar + ')'}"></div>
                        <i class="svg"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="21" viewBox="0 0 8 40.002"><path fill-rule="evenodd" clip-rule="evenodd" fill="" d="M4 0c2.21 0 4 1.79 4 4S6.21 8 4 8 0 6.21 0 4s1.79-4 4-4zM4 16c2.21 0 4 1.79 4 4s-1.79 4-4 4-4-1.79-4-4 1.79-4 4-4zM4 32.002c2.21 0 4 1.79 4 4s-1.79 4-4 4-4-1.79-4-4 1.79-4 4-4z"/></svg></i>
                    </div>
                </div>
            </div>

            <!-- notifications -->
            <div ng-show="user.authorized" class="header__item header__notifications"
                ng-class="{'active':notificationActive}"
                popover-trigger>
                <div class="table-middle" ng-click="userActive = false; notificationActive = !notificationActive;">
                    <div class="notification">
                        <i class="svg"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="29" viewBox="0 0 52 56"><path fill="" d="M51.714 46.97L46 37.445V24c0-10.354-7.91-18.893-18-19.898V2c0-1.104-.897-2-2-2-1.104 0-2 .896-2 2v4c0 1.102.896 2 2 2 8.822 0 16 7.178 16 16v14c0 .363.098.72.285 1.03l4.18 6.97H5.53l4.183-6.97c.19-.31.287-.667.287-1.03V24c0-6.16 3.6-11.84 9.17-14.477.997-.473 1.424-1.664.95-2.664-.47-.997-1.663-1.427-2.663-.952C10.497 9.2 6 16.3 6 24v13.445L.284 46.972c-.372.617-.38 1.387-.025 2.016C.613 49.613 1.28 50 2 50h16.283c.894 3.44 4 6 7.717 6 3.718 0 6.82-2.56 7.714-6H50c.72 0 1.382-.387 1.74-1.014.356-.627.345-1.4-.026-2.017zM26 52c-1.475 0-2.75-.81-3.445-2h6.886c-.69 1.19-1.968 2-3.44 2z"/></svg></i>
                        <span class="notification__number">{{ notifications.comments.length + notifications.other.length }}</span>
                    </div>
                </div>
            </div>

        </div>

        <!-- random videos button -->
        <div class="header__item header__random">
            <div class="table-middle">
                <a ng-show="user.authorized" href="" class="btn btn-green">Случайное видео</a>
            </div>
        </div>

        <!-- tags or pins -->
        <div ng-show="user.authorized" class="header__item header__tags">
            <div class="table-middle">
                <div class="tags">
                    <div class="tags__item" ng-repeat="pin in pins">
                        <i class="svg"><svg ng-click="remove(pins,pin)" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 21 21"><path fill="" d="M15.374.386c-.51-.512-1.337-.516-1.854-.006-.136.137-.23.3-.294.467-1.09 2.272-2.29 3.558-3.806 4.314-1.7.84-3.652 1.423-6.797 1.423-.17 0-.34.033-.5.1-.323.132-.577.388-.71.71-.133.32-.133.68 0 1 .066.163.162.306.283.427l4.25 4.25L0 21l7.93-5.946 4.25 4.25c.12.12.266.216.427.283.16.066.33.103.5.103.17 0 .34-.036.5-.103.322-.132.578-.386.71-.71.066-.157.1-.33.1-.5 0-3.144.582-5.097 1.42-6.768.756-1.518 2.04-2.72 4.317-3.81.17-.062.33-.157.464-.294.51-.514.507-1.343-.005-1.853L15.373.386z"/></svg></i>
                        <img ng-src="{{pin.url}}" alt="tag"/>
                    </div>
                </div>
            </div>
        </div>

        <!-- search block -->
        <div class="header__item header__search" ng-class="{'searchActive':searchActive || searchKey}">
            <div class="table-middle">
                <div class="search-form__box">
                    <div class="search-form" ng-class="{'active':searchActive}">
                        <input id="search-form" ng-model="searchKey" type="search" placeholder="Поиск" autocomplete="off" ng-focus="searchActive = true" ng-blur="searchActive = searchKey ? true : false" ng-enter="goSearch()">
                        <button ng-click="goSearch()" class="btn"></button>
                        <i class="svg"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 34 34"><path fill="" d="M34 31.163L25.27 22.43c1.754-2.342 2.804-5.24 2.804-8.394C28.072 6.28 21.79 0 14.037 0 6.287 0 0 6.28 0 14.036 0 21.788 6.286 28.07 14.038 28.07c3.152 0 6.05-1.05 8.392-2.805L31.163 34 34 31.163zM4.013 14.033C4.012 8.507 8.51 4.01 14.037 4.01s10.025 4.496 10.025 10.024c0 5.527-4.498 10.024-10.025 10.024-5.528 0-10.025-4.496-10.025-10.024z"/></svg></i>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- header -->


    <!-- popovers -->
    <div>

        <!-- user popover -->
        <div class="popover popover--user"
            ng-show="userActive">
            <a ui-sref="profile" class="popover__link">
                <i class="svg"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 36 36"><path fill="" d="M18 18c4.97 0 9-4.03 9-9s-4.03-9-9-9-9 4.027-9 9 4.03 9 9 9zm0 4.5c-13.726 0-18 9-18 9V36h36v-4.5s-4.274-9-18-9z"/></svg></i>
                <span class="popover__link-name">Профиль</span>
                <span class="popover__link-change"><span>Изменить</span></span>
            </a>
            <a ui-sref="user({ url: currentUser.url })" class="popover__link">
                <i class="svg"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 25 31"><path fill="" d="M24.156 13.635L2.406.258C2.14.098 1.866 0 1.556 0 .702 0 .007.727.007 1.613H0v27.773h.008C.008 30.273.703 31 1.555 31c.32 0 .586-.113.875-.273l21.727-13.36c.515-.445.843-1.117.843-1.867s-.328-1.414-.844-1.865z"/></svg></i>
                <span class="popover__link-name">Канал</span>
                <span class="popover__link-change">Изменить</span>
            </a>
            <hr class="hr hr--grey">
            <a ng-click="logout(); userActive = false;" class="popover__link">
                <i class="svg"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 44 44"><path fill="" d="M0 0v44h30V31h-2v11H2V2h26v11h2V0H0zm34.102 14.93l1.414-1.416L44 22l-8.484 8.484-1.414-1.414 6.074-6.074H14.01V21h26.162l-6.07-6.07z"/></svg></i>
                <span class="popover__link-name">Выйти</span>
            </a>
        </div>
        <!-- user popover -->

        <!-- notifications popover -->
        <div class="popover popover--notification"
            ng-show="notificationActive">
            <div class="noti-tabs" ng-init="notiNotActive = true">
                <div class="noti-tabs__header">
                    <tabs notifications="true">
                        <div class="clearfix">
                            <a class="active" ng-class="{'active':notiNotActive}" ng-click="notiNotActive = true; notiComActive = false;">Комментарии</a>
                            <a ng-class="{'active':notiComActive}" ng-click="notiNotActive = false; notiComActive = true;">Уведомления</a>
                        </div>
                        <div class="tabs__underline hidden-tablet hidden-desktop"></div>
                    </tabs>
                </div>
                <div class="noti-tabs__box">
                    <div class="noti-tabs__left" ng-class="{'active':notiNotActive}">
                        <div class="noti-tabs__link" ng-repeat="comment in notifications.comments | limitTo: 8"
                        ng-class="{'reply': comment.type}">
                            <p class="reply"><a href="#" class="user-name">Clan ZIP: </a><a href="#">Привет, да видео монтировал я сам)), tes test test</a></p>
                        </div>
                        <div class="noti-tabs__bottom hidden-phone">
                            <hr class="hr hr--grey">
                            <a ui-sref="notifications-comments">Все комментарии
                            <i class="svg"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 28.914 16.998"><path fill-rule="evenodd" clip-rule="evenodd" fill="" d="M28.914 2.857L26.057 0l-11.66 11.66L2.83.093 0 2.924l13.98 13.98.35-.348.44.442"/></svg></i></a>
                        </div>
                        <div class="center hidden-tablet hidden-desktop">
                            <a class="btn btn-green">Загрузить еще</a>
                        </div>
                    </div>
                    <div class="noti-tabs__right" ng-class="{'active':notiComActive}">
                        <div class="noti-tabs__link" ng-repeat="note in notifications.other | limitTo: 6" ng-class="note.type">
                            <p ng-if="note.type == 'subscribed'">
                                <a href="#" class="user-name">{{ note.user }}: </a>подписался на <a href="#">{{ note.reciever }}</a>
                            </p>
                            <p ng-if="note.type == 'newvideo'">На вашем YouTube канале <a href="#" class="user-name">{{ note.user }}</a> обнаружено ({{ note.number }}) новых видео</p>
                            <p ng-if="note.type == 'liked'"><a href="#" class="user-name">{{ note.user }}: </a>Нравится ваше видео <a href="#">{{ note.reciever }}</a></p>
                        </div>
                        <div class="noti-tabs__bottom hidden-phone">
                            <hr class="hr hr--grey">
                            <a ui-sref="notifications-all">Все уведомления
                            <i class="svg"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 28.914 16.998"><path fill-rule="evenodd" clip-rule="evenodd" fill="" d="M28.914 2.857L26.057 0l-11.66 11.66L2.83.093 0 2.924l13.98 13.98.35-.348.44.442"/></svg></i></a>
                        </div>
                        <div class="center hidden-tablet hidden-desktop">
                            <a class="btn btn-green">Загрузить еще</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- notifications popover -->

    </div><!-- popovers -->

</header>
